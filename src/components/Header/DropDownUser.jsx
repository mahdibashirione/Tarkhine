import { motion } from "framer-motion";
import { useState } from "react";
import { FiChevronDown } from "react-icons/fi";
import { useSelector } from "react-redux";
import { Link } from "react-router-dom";

const DropDownUser = () => {
  const auth = useSelector((state) => state.auth);
  const [isOpen, setIsOpen] = useState(false);
  const optionsAffterRegister = [
    {
      id: 1,
      action: () => {
        handleClose();
      },
      title: "پروفایل",
      url: "/user",
      icon: (
        <svg
          width="16"
          height="16"
          viewBox="0 0 16 16"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M8.00033 8.50001C5.88699 8.50001 4.16699 6.78001 4.16699 4.66668C4.16699 2.55334 5.88699 0.833344 8.00033 0.833344C10.1137 0.833344 11.8337 2.55334 11.8337 4.66668C11.8337 6.78001 10.1137 8.50001 8.00033 8.50001ZM8.00033 1.83334C6.44033 1.83334 5.16699 3.10668 5.16699 4.66668C5.16699 6.22668 6.44033 7.50001 8.00033 7.50001C9.56033 7.50001 10.8337 6.22668 10.8337 4.66668C10.8337 3.10668 9.56033 1.83334 8.00033 1.83334Z"
            fill={`#353535`}
          />
          <path
            d="M13.7268 15.1667C13.4534 15.1667 13.2268 14.94 13.2268 14.6667C13.2268 12.3667 10.8801 10.5 8.0001 10.5C5.1201 10.5 2.77344 12.3667 2.77344 14.6667C2.77344 14.94 2.54677 15.1667 2.27344 15.1667C2.0001 15.1667 1.77344 14.94 1.77344 14.6667C1.77344 11.82 4.56677 9.5 8.0001 9.5C11.4334 9.5 14.2268 11.82 14.2268 14.6667C14.2268 14.94 14.0001 15.1667 13.7268 15.1667Z"
            fill={`#353535`}
          />
        </svg>
      ),
    },
    {
      id: 2,
      action: () => {
        handleClose();
      },
      title: "پیگیری سفارش",
      url: "/user/track-orders",
      icon: (
        <svg
          width="16"
          height="16"
          viewBox="0 0 16 16"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M8.66699 6.5H4.66699C4.39366 6.5 4.16699 6.27333 4.16699 6C4.16699 5.72667 4.39366 5.5 4.66699 5.5H8.66699C8.94033 5.5 9.16699 5.72667 9.16699 6C9.16699 6.27333 8.94033 6.5 8.66699 6.5Z"
            fill="#353535"
          />
          <path
            d="M12.6936 9.86613C11.6869 9.86613 10.8336 9.11946 10.7536 8.15946C10.7003 7.60613 10.9003 7.06614 11.3003 6.67281C11.6336 6.32614 12.1069 6.13281 12.6069 6.13281H14.0003C14.6603 6.15281 15.1669 6.67278 15.1669 7.31279V8.68616C15.1669 9.32616 14.6603 9.84613 14.0203 9.86613H12.6936ZM13.9802 7.13281H12.6136C12.3803 7.13281 12.1669 7.21948 12.0136 7.37948C11.8203 7.56614 11.7269 7.81946 11.7536 8.07279C11.7869 8.51279 12.2136 8.86613 12.6936 8.86613H14.0003C14.0869 8.86613 14.1669 8.78616 14.1669 8.68616V7.31279C14.1669 7.21279 14.0869 7.13948 13.9802 7.13281Z"
            fill="#353535"
          />
          <path
            d="M10.6663 14.1663H4.66634C2.37301 14.1663 0.833008 12.6263 0.833008 10.333V5.66634C0.833008 3.61301 2.09966 2.12635 4.06632 1.87968C4.24633 1.85301 4.45301 1.83301 4.66634 1.83301H10.6663C10.8263 1.83301 11.033 1.83967 11.2463 1.87301C13.213 2.09967 14.4997 3.59301 14.4997 5.66634V6.63302C14.4997 6.90635 14.273 7.13302 13.9997 7.13302H12.613C12.3797 7.13302 12.1664 7.21968 12.013 7.37968L12.0063 7.38635C11.8197 7.56635 11.733 7.81299 11.753 8.06633C11.7863 8.50633 12.213 8.85966 12.693 8.85966H13.9997C14.273 8.85966 14.4997 9.08633 14.4997 9.35966V10.3263C14.4997 12.6263 12.9597 14.1663 10.6663 14.1663ZM4.66634 2.83301C4.50634 2.83301 4.353 2.84633 4.19967 2.86633C2.733 3.053 1.83301 4.11967 1.83301 5.66634V10.333C1.83301 12.053 2.94634 13.1663 4.66634 13.1663H10.6663C12.3863 13.1663 13.4997 12.053 13.4997 10.333V9.86633H12.693C11.6863 9.86633 10.833 9.11967 10.753 8.15967C10.6997 7.613 10.8997 7.06635 11.2997 6.67969C11.6463 6.32635 12.113 6.13302 12.613 6.13302H13.4997V5.66634C13.4997 4.10634 12.5863 3.03299 11.1063 2.85966C10.9463 2.83299 10.8063 2.83301 10.6663 2.83301H4.66634Z"
            fill="#353535"
          />
        </svg>
      ),
    },
    {
      id: 3,
      action: () => {
        handleClose();
      },
      title: "علاقه مندی ها",
      url: "/user/interests",
      icon: (
        <svg
          width="16"
          height="16"
          viewBox="0 0 16 16"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M8.00016 14.4333C7.7935 14.4333 7.5935 14.4066 7.42683 14.3467C4.88016 13.4733 0.833496 10.3733 0.833496 5.79332C0.833496 3.45998 2.72016 1.56665 5.04016 1.56665C6.16683 1.56665 7.22016 2.00665 8.00016 2.79332C8.78016 2.00665 9.8335 1.56665 10.9602 1.56665C13.2802 1.56665 15.1668 3.46665 15.1668 5.79332C15.1668 10.38 11.1202 13.4733 8.5735 14.3467C8.40683 14.4066 8.20683 14.4333 8.00016 14.4333ZM5.04016 2.56665C3.2735 2.56665 1.8335 4.01332 1.8335 5.79332C1.8335 10.3466 6.2135 12.88 7.7535 13.4066C7.8735 13.4466 8.1335 13.4466 8.2535 13.4066C9.78683 12.88 14.1735 10.3533 14.1735 5.79332C14.1735 4.01332 12.7335 2.56665 10.9668 2.56665C9.9535 2.56665 9.0135 3.03998 8.40683 3.85998C8.22016 4.11332 7.7935 4.11332 7.60683 3.85998C6.98683 3.03332 6.0535 2.56665 5.04016 2.56665Z"
            fill="#353535"
          />
        </svg>
      ),
    },
    {
      id: 4,
      action: () => {
        handleClose();
      },
      title: "ادرس های من",
      url: "/user/my-addresses",
      icon: (
        <svg
          className="w-4 h-4"
          viewBox="0 0 24 25"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M12 14.67C9.87 14.67 8.13 12.94 8.13 10.8C8.13 8.66 9.87 6.94 12 6.94C14.13 6.94 15.87 8.67 15.87 10.81C15.87 12.95 14.13 14.67 12 14.67ZM12 8.44C10.7 8.44 9.63 9.5 9.63 10.81C9.63 12.12 10.69 13.18 12 13.18C13.31 13.18 14.37 12.12 14.37 10.81C14.37 9.5 13.3 8.44 12 8.44Z"
            fill="#353535"
          />
          <path
            d="M12 23.26C10.52 23.26 9.02999 22.7 7.86999 21.59C4.91999 18.75 1.65999 14.22 2.88999 8.83C3.99999 3.94 8.26999 1.75 12 1.75C12 1.75 12 1.75 12.01 1.75C15.74 1.75 20.01 3.94 21.12 8.84C22.34 14.23 19.08 18.75 16.13 21.59C14.97 22.7 13.48 23.26 12 23.26ZM12 3.25C9.08999 3.25 5.34999 4.8 4.35999 9.16C3.27999 13.87 6.23999 17.93 8.91999 20.5C10.65 22.17 13.36 22.17 15.09 20.5C17.76 17.93 20.72 13.87 19.66 9.16C18.66 4.8 14.91 3.25 12 3.25Z"
            fill="#353535"
          />
        </svg>
      ),
    },
    {
      id: 5,
      action: () => {
        handleClose();
      },
      title: "خروج از حساب",
      url: "/",
      icon: (
        <svg
          width="16"
          height="16"
          viewBox="0 0 16 16"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M10.1597 14.8467H10.073C7.11302 14.8467 5.68635 13.68 5.43968 11.0667C5.41302 10.7933 5.61302 10.5467 5.89302 10.52C6.15968 10.4933 6.41302 10.7 6.43968 10.9733C6.63302 13.0667 7.61968 13.8467 10.0797 13.8467H10.1664C12.8797 13.8467 13.8397 12.8867 13.8397 10.1733V5.82665C13.8397 3.11332 12.8797 2.15332 10.1664 2.15332H10.0797C7.60635 2.15332 6.61968 2.94665 6.43968 5.07999C6.40635 5.35332 6.17302 5.55999 5.89302 5.53332C5.61302 5.51332 5.41302 5.26665 5.43302 4.99332C5.65968 2.33999 7.09302 1.15332 10.073 1.15332H10.1597C13.433 1.15332 14.833 2.55332 14.833 5.82665V10.1733C14.833 13.4467 13.433 14.8467 10.1597 14.8467Z"
            fill="#353535"
          />
          <path
            d="M9.99975 8.5H2.41309C2.13975 8.5 1.91309 8.27333 1.91309 8C1.91309 7.72667 2.13975 7.5 2.41309 7.5H9.99975C10.2731 7.5 10.4998 7.72667 10.4998 8C10.4998 8.27333 10.2731 8.5 9.99975 8.5Z"
            fill="#353535"
          />
          <path
            d="M3.89964 10.7336C3.77297 10.7336 3.6463 10.6869 3.5463 10.5869L1.31297 8.35356C1.11964 8.16022 1.11964 7.84022 1.31297 7.64689L3.5463 5.41355C3.73964 5.22022 4.05964 5.22022 4.25297 5.41355C4.4463 5.60689 4.4463 5.92689 4.25297 6.12022L2.37297 8.00022L4.25297 9.88022C4.4463 10.0736 4.4463 10.3936 4.25297 10.5869C4.15964 10.6869 4.0263 10.7336 3.89964 10.7336Z"
            fill="#353535"
          />
        </svg>
      ),
    },
  ];
  const optionsPreRegister = [
    {
      id: 1,
      action: () => {
        handleClose();
      },
      title: "علاقه مندی ها",
      url: "/user/interests",
      icon: (
        <svg
          width="16"
          height="16"
          viewBox="0 0 16 16"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M8.00016 14.4333C7.7935 14.4333 7.5935 14.4066 7.42683 14.3467C4.88016 13.4733 0.833496 10.3733 0.833496 5.79332C0.833496 3.45998 2.72016 1.56665 5.04016 1.56665C6.16683 1.56665 7.22016 2.00665 8.00016 2.79332C8.78016 2.00665 9.8335 1.56665 10.9602 1.56665C13.2802 1.56665 15.1668 3.46665 15.1668 5.79332C15.1668 10.38 11.1202 13.4733 8.5735 14.3467C8.40683 14.4066 8.20683 14.4333 8.00016 14.4333ZM5.04016 2.56665C3.2735 2.56665 1.8335 4.01332 1.8335 5.79332C1.8335 10.3466 6.2135 12.88 7.7535 13.4066C7.8735 13.4466 8.1335 13.4466 8.2535 13.4066C9.78683 12.88 14.1735 10.3533 14.1735 5.79332C14.1735 4.01332 12.7335 2.56665 10.9668 2.56665C9.9535 2.56665 9.0135 3.03998 8.40683 3.85998C8.22016 4.11332 7.7935 4.11332 7.60683 3.85998C6.98683 3.03332 6.0535 2.56665 5.04016 2.56665Z"
            fill="#353535"
          />
        </svg>
      ),
    },
    {
      id: 2,
      action: () => {
        handleClose();
      },
      title: "ادرس های من",
      url: "/user/my-addresses",
      icon: (
        <svg
          className="w-4 h-4"
          viewBox="0 0 24 25"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M12 14.67C9.87 14.67 8.13 12.94 8.13 10.8C8.13 8.66 9.87 6.94 12 6.94C14.13 6.94 15.87 8.67 15.87 10.81C15.87 12.95 14.13 14.67 12 14.67ZM12 8.44C10.7 8.44 9.63 9.5 9.63 10.81C9.63 12.12 10.69 13.18 12 13.18C13.31 13.18 14.37 12.12 14.37 10.81C14.37 9.5 13.3 8.44 12 8.44Z"
            fill="#353535"
          />
          <path
            d="M12 23.26C10.52 23.26 9.02999 22.7 7.86999 21.59C4.91999 18.75 1.65999 14.22 2.88999 8.83C3.99999 3.94 8.26999 1.75 12 1.75C12 1.75 12 1.75 12.01 1.75C15.74 1.75 20.01 3.94 21.12 8.84C22.34 14.23 19.08 18.75 16.13 21.59C14.97 22.7 13.48 23.26 12 23.26ZM12 3.25C9.08999 3.25 5.34999 4.8 4.35999 9.16C3.27999 13.87 6.23999 17.93 8.91999 20.5C10.65 22.17 13.36 22.17 15.09 20.5C17.76 17.93 20.72 13.87 19.66 9.16C18.66 4.8 14.91 3.25 12 3.25Z"
            fill="#353535"
          />
        </svg>
      ),
    },
    {
      id: 3,
      action: () => {
        handleClose();
      },
      title: "ورود",
      url: "/signin",
      icon: (
        <svg
          width="16"
          height="16"
          viewBox="0 0 16 16"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M8.00033 8.50001C5.88699 8.50001 4.16699 6.78001 4.16699 4.66668C4.16699 2.55334 5.88699 0.833344 8.00033 0.833344C10.1137 0.833344 11.8337 2.55334 11.8337 4.66668C11.8337 6.78001 10.1137 8.50001 8.00033 8.50001ZM8.00033 1.83334C6.44033 1.83334 5.16699 3.10668 5.16699 4.66668C5.16699 6.22668 6.44033 7.50001 8.00033 7.50001C9.56033 7.50001 10.8337 6.22668 10.8337 4.66668C10.8337 3.10668 9.56033 1.83334 8.00033 1.83334Z"
            fill={`#353535`}
          />
          <path
            d="M13.7268 15.1667C13.4534 15.1667 13.2268 14.94 13.2268 14.6667C13.2268 12.3667 10.8801 10.5 8.0001 10.5C5.1201 10.5 2.77344 12.3667 2.77344 14.6667C2.77344 14.94 2.54677 15.1667 2.27344 15.1667C2.0001 15.1667 1.77344 14.94 1.77344 14.6667C1.77344 11.82 4.56677 9.5 8.0001 9.5C11.4334 9.5 14.2268 11.82 14.2268 14.6667C14.2268 14.94 14.0001 15.1667 13.7268 15.1667Z"
            fill={`#353535`}
          />
        </svg>
      ),
    },
    {
      id: 4,
      action: () => {
        handleClose();
      },
      title: "ثبت نام",
      url: "/signup",
      icon: (
        <svg
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M5.54 19.5201C4.93 19.5201 4.36 19.31 3.95 18.92C3.43 18.43 3.18 17.69 3.27 16.89L3.64 13.65C3.71 13.04 4.08 12.23 4.51 11.79L12.72 3.10005C14.77 0.930049 16.91 0.870049 19.08 2.92005C21.25 4.97005 21.31 7.11005 19.26 9.28005L11.05 17.97C10.63 18.42 9.85 18.84 9.24 18.9401L6.02 19.49C5.85 19.5 5.7 19.5201 5.54 19.5201ZM15.93 2.91005C15.16 2.91005 14.49 3.39005 13.81 4.11005L5.6 12.8101C5.4 13.0201 5.17 13.5201 5.13 13.8101L4.76 17.05C4.72 17.38 4.8 17.65 4.98 17.82C5.16 17.99 5.43 18.05 5.76 18L8.98 17.4501C9.27 17.4001 9.75 17.14 9.95 16.93L18.16 8.24005C19.4 6.92005 19.85 5.70005 18.04 4.00005C17.24 3.23005 16.55 2.91005 15.93 2.91005Z"
            fill="#353535"
          />
          <path
            d="M17.34 10.9501C17.32 10.9501 17.29 10.9501 17.27 10.9501C14.15 10.6401 11.64 8.27009 11.16 5.17009C11.1 4.76009 11.38 4.38009 11.79 4.31009C12.2 4.25009 12.58 4.53009 12.65 4.94009C13.03 7.36009 14.99 9.22009 17.43 9.46009C17.84 9.50009 18.14 9.87009 18.1 10.2801C18.05 10.6601 17.72 10.9501 17.34 10.9501Z"
            fill="#353535"
          />
          <path
            d="M21 22.75H3C2.59 22.75 2.25 22.41 2.25 22C2.25 21.59 2.59 21.25 3 21.25H21C21.41 21.25 21.75 21.59 21.75 22C21.75 22.41 21.41 22.75 21 22.75Z"
            fill="#353535"
          />
        </svg>
      ),
    },
  ];

  function handleShow() {
    setIsOpen(!isOpen);
  }
  function handleClose() {
    setIsOpen(false);
  }

  return (
    <div className={`relative py-2 group`}>
      <button
        onClick={handleShow}
        className={`${
          isOpen ? "text-white bg-primary" : "bg-green-100"
        } flex rounded p-2 lg:p-3 items-center duration-200 text-primary`}
      >
        <svg
          width="24"
          height="24"
          className="duration-200"
          viewBox="0 0 16 16"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M8.00033 8.50001C5.88699 8.50001 4.16699 6.78001 4.16699 4.66668C4.16699 2.55334 5.88699 0.833344 8.00033 0.833344C10.1137 0.833344 11.8337 2.55334 11.8337 4.66668C11.8337 6.78001 10.1137 8.50001 8.00033 8.50001ZM8.00033 1.83334C6.44033 1.83334 5.16699 3.10668 5.16699 4.66668C5.16699 6.22668 6.44033 7.50001 8.00033 7.50001C9.56033 7.50001 10.8337 6.22668 10.8337 4.66668C10.8337 3.10668 9.56033 1.83334 8.00033 1.83334Z"
            fill={`${isOpen ? "#fff" : "#417F56"}`}
          />
          <path
            d="M13.7268 15.1667C13.4534 15.1667 13.2268 14.94 13.2268 14.6667C13.2268 12.3667 10.8801 10.5 8.0001 10.5C5.1201 10.5 2.77344 12.3667 2.77344 14.6667C2.77344 14.94 2.54677 15.1667 2.27344 15.1667C2.0001 15.1667 1.77344 14.94 1.77344 14.6667C1.77344 11.82 4.56677 9.5 8.0001 9.5C11.4334 9.5 14.2268 11.82 14.2268 14.6667C14.2268 14.94 14.0001 15.1667 13.7268 15.1667Z"
            fill={`${isOpen ? "#fff" : "#417F56"}`}
          />
        </svg>
        <FiChevronDown className={`${isOpen && "rotate-180"} duration-200`} />
      </button>
      <motion.ul
        initial={{ maxHeight: 0 }}
        animate={isOpen ? { maxHeight: 300 } : { maxHeight: 0 }}
        transition={{ duration: 0.2 }}
        className="divide-y text-[#353535] drop-shadow divide-gray-200 absolute top-full flex flex-col left-0 bg-white rounded overflow-hidden shadow"
      >
        {auth
          ? optionsAffterRegister.map((item) => {
              return (
                <Link
                  to={item.url}
                  key={item.id}
                  onClick={item.action}
                  className="whitespace-nowrap hover:bg-green-100 hover:text-primary gap-2 p-3 pl-8 leading-6 flex items-center"
                >
                  {item.icon}
                  {item.title}
                </Link>
              );
            })
          : optionsPreRegister.map((item) => {
              return (
                <Link
                  to={item.url}
                  key={item.id}
                  onClick={item.action}
                  className="whitespace-nowrap hover:bg-green-100 hover:text-primary gap-2 p-3 pl-8 leading-6 flex items-center"
                >
                  {item.icon}
                  {item.title}
                </Link>
              );
            })}
      </motion.ul>
    </div>
  );
};

export default DropDownUser;
